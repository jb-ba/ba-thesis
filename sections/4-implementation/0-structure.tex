\clearpage
\section{Implementation} \label{sec:implementation}
The implementation is based on one Kubernetes master in the cloud and and one worker on-premises, at the edge. The master runs on a virtual private server (VPS) from Contabo\cite{online:ContaboWebsite}. 
It has four cores, a minimum of 10 gigabyte of RAM, more then the official Kubernetes requirments\cite{kubernetesRequirementsInstall:online}, and runs Ubuntu 18.10. The worker is a raspberry pi (RPi) model 3b+ on bare metal as here performance is critical. It has one gigabyte of RAM and runs on ARMv7, a 32-bit architecture. It meets the Kubernetes system requirements for workers on paper, but it is generally not recommended by the Kubernetes developers to run Kubernetes for production purposes on the device. The RPi is one of the most popular single-board computers and often used in IoT project, I use it in this thesis as well.

I will divide the implementation in different stages for better understanding. In stage one I setup the system, installing the edge device and joining it to the master. In stage two, I will deploy an example application to the edge device controlled from the Kubernetes master. I will explain in more detail the build steps for the containers and how it is deployed. In stage three the IoT setup will be deployed. This includes a CoAP server on the edge and microcontroller sending data to that server. 


\input{sections/4-implementation/1-install.tex}
\input{sections/4-implementation/2-simpleService.tex}
\input{sections/4-implementation/actualSetup.tex}

\comment{
\bgroup\obeylines
Kubernetes in the cloud
Node running locally with HiveMQ on a raspberry pi
HiveMQ is running as container
Static vs non static ip (only static ip atm)
connected to esp32 devices
\egroup
}





\comment{
Kubeedge
OTA update to esp32
https://randomnerdtutorials.com/esp32-over-the-air-ota-programming/




}