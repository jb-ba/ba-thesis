% \subsubsection{Security}
Security is one of the biggest challenges in IoT. In 2016 a botnet with over 600k infected devices, primarily edge and IoT devices, overwhelmed several high-profile targets like the DNS provider Dyn with massive distributed denial-of-service (DDoS) attacks. This caused a temporary outage of their DNS servers rendering many webpages, among others  Twitter, Spotify and Amazon, temporally inaccessible. \\
In a recent talk at the Container Security Conference 2019 Andy Martin, co-founder of Control Plane, noted ``The root of all evil is unnecessarily running processes or containers as root''\cite{RootlessContainerSecurityTalk0:online}. This user can read, write and run all files in all directories. In the beginning of 2018 a new vulnerability on Kubernetes was discovered giving containers with volume mounts the ability to access data outside the volumes sub-path. The root user would thus have unlimited access to the host resources. To combat this, the user should be changed to a non-root and non-sudo enabled user. Running a container as privileged as in the previous section explained has further security implications and should only be used if necessary. It breaks down the isolation layers and allows the container to access and modify the hosts resources. Additionally, not providing a shell inside containers reduces the attack surface even further. It is also not possible to expose new ports from inside a container.\\
Using a compiled language adds further security. Binaries are resistant to code injection as well as other modifications and reverse engineering. Even if someone got a copy of the image, they could not detect how it works or alter it. Combined with the image digest they could not even sideload another application an repackage it as this would change the image digest. \\
Containers are usually downloaded from registries and most registries allow for overriding of image versions. If malicious attackers gain access to the registry they could potentially overwrite the latests version for a specific version tag. This would mean, all downloads by version tag would then download the malicious version. However, each image also has an image digest, a cryptographic signature ensuring that the image in question is the actual image. In production an image should always be pulled based on the image digest, also called "Pinning-by-Digest". So instead of unsing the download link \url{jonas27/hello:v1.0.1} the administrator should specify the image digest like so \url{jonas27/hello@sha256:725355347bc2eae8f7c9ab9dd09b9ef2c884b3458c693978f5408785aef1fb72}. This simple technique not only greatly improves security but also guarantees that each container is derived from the same image and combats race conditions.\\


\comment{
To combat malicious attacks certain methods have been developed. I will only analyze the direct container security aspects as they are always applicable for containers. Other methods, like specifically developed OSs and securing the CI/CD pipeline are not discussed at this point.\\

In the implementation \cref{sec:testService} \nameref{sec:testService} I will use the \textit{hello} service for testing. It's current version, v5arm, is saved on the Docker image hub and can be pulled with the link \textit{jonas27/hello:v5arm}. 

% \footnote{In this thesis I will only show deployments of containers with tags as they are referenced in multiple places for clarity. With Helm Charts this is profoundly easier but outside the scope of this thesis.} 


In conclusion, containers can significantly increase the isolation if some basics rules are followed. Use compiled language if possible, use the scratch image, do not include or expose more than needed and most importantly, don't use the root user if not absolutely necessary. When system resources are exposed it is even more important to properly secure the container. 
}